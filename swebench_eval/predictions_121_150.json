[
  {
    "instance_id": "matplotlib__matplotlib-22711",
    "model_patch": "diff --git a/lib/matplotlib/widgets.py b/lib/matplotlib/widgets.py\nindex da5b40a5ef..b3101cdbbc 100644\n--- a/lib/matplotlib/widgets.py\n+++ b/lib/matplotlib/widgets.py\n@@ -903,13 +903,11 @@ class RangeSlider(SliderBase):\n             xy[1] = .25, val[1]\n             xy[2] = .75, val[1]\n             xy[3] = .75, val[0]\n-            xy[4] = .25, val[0]\n         else:\n             xy[0] = val[0], .25\n             xy[1] = val[0], .75\n             xy[2] = val[1], .75\n             xy[3] = val[1], .25\n-            xy[4] = val[0], .25\n         self.poly.xy = xy\n         self.valtext.set_text(self._format(val))\n         if self.drawon:",
    "model_name_or_path": "sage-agent"
  },
  {
    "instance_id": "matplotlib__matplotlib-22835",
    "model_patch": "diff --git a/lib/matplotlib/artist.py b/lib/matplotlib/artist.py\nindex 1f33b9d3ec..3fc64b4a1f 100644\n--- a/lib/matplotlib/artist.py\n+++ b/lib/matplotlib/artist.py\n@@ -1304,10 +1304,15 @@ class Artist:\n             normed = self.norm(data)\n             if np.isfinite(normed):\n                 # Midpoints of neighboring color intervals.\n-                neighbors = self.norm.inverse(\n-                    (int(self.norm(data) * n) + np.array([0, 1])) / n)\n-                delta = abs(neighbors - data).max()\n-                g_sig_digits = cbook._g_sig_digits(data, delta)\n+                try:\n+                    neighbors = self.norm.inverse(\n+                        (int(self.norm(data) * n) + np.array([0, 1])) / n)\n+                    delta = abs(neighbors - data).max()\n+                    g_sig_digits = cbook._g_sig_digits(data, delta)\n+                except (ValueError, AttributeError):\n+                    # ValueError: norm is not invertible (e.g., BoundaryNorm)\n+                    # AttributeError: norm does not have inverse method\n+                    g_sig_digits = 3  # Consistent with default below.\n             else:\n                 g_sig_digits = 3  # Consistent with default below.\n             return \"[{:-#.{}g}]\".format(data, g_sig_digits)",
    "model_name_or_path": "sage-agent"
  },
  {
    "instance_id": "matplotlib__matplotlib-23299",
    "model_patch": "diff --git a/lib/matplotlib/__init__.py b/lib/matplotlib/__init__.py\nindex c268a56724..1e0c781bea 100644\n--- a/lib/matplotlib/__init__.py\n+++ b/lib/matplotlib/__init__.py\n@@ -674,7 +674,10 @@ class RcParams(MutableMapping, dict):\n             val = dict.__getitem__(self, key)\n             if val is rcsetup._auto_backend_sentinel:\n                 from matplotlib import pyplot as plt\n-                plt.switch_backend(rcsetup._auto_backend_sentinel)\n+                # Only call switch_backend if the backend hasn't been\n+                # initialized yet, to avoid closing all existing figures.\n+                if plt._backend_mod is None:\n+                    plt.switch_backend(rcsetup._auto_backend_sentinel)\n \n         return dict.__getitem__(self, key)",
    "model_name_or_path": "sage-agent"
  },
  {
    "instance_id": "matplotlib__matplotlib-23314",
    "model_patch": "diff --git a/lib/mpl_toolkits/mplot3d/axes3d.py b/lib/mpl_toolkits/mplot3d/axes3d.py\nindex 9db44b7994..5479bc1af0 100644\n--- a/lib/mpl_toolkits/mplot3d/axes3d.py\n+++ b/lib/mpl_toolkits/mplot3d/axes3d.py\n@@ -387,6 +387,8 @@ class Axes3D(Axes):\n \n     @martist.allow_rasterization\n     def draw(self, renderer):\n+        if not self.get_visible():\n+            return\n         self._unstale_viewLim()\n \n         # draw the background patch",
    "model_name_or_path": "sage-agent"
  },
  {
    "instance_id": "matplotlib__matplotlib-23476",
    "model_patch": "diff --git a/lib/matplotlib/figure.py b/lib/matplotlib/figure.py\nindex c55864243a..f96d1e0bff 100644\n--- a/lib/matplotlib/figure.py\n+++ b/lib/matplotlib/figure.py\n@@ -3044,7 +3044,11 @@ class Figure(FigureBase):\n         self.__dict__ = state\n \n         # re-initialise some of the unstored state information\n+        # Store the current DPI before creating the canvas to avoid it being\n+        # scaled by the device pixel ratio on high DPI displays (e.g., macOS)\n+        _dpi = self.dpi\n         FigureCanvasBase(self)  # Set self.canvas.\n+        self.dpi = _dpi\n \n         if restore_to_pylab:\n             # lazy import to avoid circularity",
    "model_name_or_path": "sage-agent"
  },
  {
    "instance_id": "matplotlib__matplotlib-23562",
    "model_patch": "diff --git a/lib/mpl_toolkits/mplot3d/art3d.py b/lib/mpl_toolkits/mplot3d/art3d.py\nindex 8fe6e7a9c1..936b59faaa 100644\n--- a/lib/mpl_toolkits/mplot3d/art3d.py\n+++ b/lib/mpl_toolkits/mplot3d/art3d.py\n@@ -765,6 +765,10 @@ class Poly3DCollection(PolyCollection):\n         self._facecolor3d = PolyCollection.get_facecolor(self)\n         self._edgecolor3d = PolyCollection.get_edgecolor(self)\n         self._alpha3d = PolyCollection.get_alpha(self)\n+        # Initialize 2d colors to avoid AttributeError when get_facecolor()\n+        # or get_edgecolor() is called before do_3d_projection()\n+        self._facecolors2d = self._facecolor3d\n+        self._edgecolors2d = self._edgecolor3d\n         self.stale = True\n \n     def set_sort_zpos(self, val):",
    "model_name_or_path": "sage-agent"
  },
  {
    "instance_id": "matplotlib__matplotlib-23563",
    "model_patch": "diff --git a/lib/mpl_toolkits/mplot3d/art3d.py b/lib/mpl_toolkits/mplot3d/art3d.py\nindex 8fe6e7a9c1..69ae65b9b0 100644\n--- a/lib/mpl_toolkits/mplot3d/art3d.py\n+++ b/lib/mpl_toolkits/mplot3d/art3d.py\n@@ -222,6 +222,9 @@ def line_2d_to_3d(line, zs=0, zdir='z'):\n     \"\"\"Convert a 2D line to 3D.\"\"\"\n \n     line.__class__ = Line3D\n+    # Initialize _verts3d before calling set_3d_properties to ensure\n+    # the attribute exists even if set_3d_properties fails\n+    line._verts3d = ([], [], [])\n     line.set_3d_properties(zs, zdir)",
    "model_name_or_path": "sage-agent"
  },
  {
    "instance_id": "matplotlib__matplotlib-23913",
    "model_patch": "diff --git a/lib/matplotlib/legend.py b/lib/matplotlib/legend.py\nindex 9e5b903d59..e76b0df66e 100644\n--- a/lib/matplotlib/legend.py\n+++ b/lib/matplotlib/legend.py\n@@ -286,6 +286,11 @@ handler_map : dict or None\n     The custom dictionary mapping instances or types to a legend\n     handler. This *handler_map* updates the default handler map\n     found at `matplotlib.legend.Legend.get_legend_handler_map`.\n+\n+draggable : bool, default: False\n+    Whether the legend can be dragged with the mouse. If ``True``, the\n+    legend can be dragged interactively. See `set_draggable` for more\n+    details.\n \"\"\")\n \n \n@@ -342,7 +347,8 @@ class Legend(Artist):\n         title_fontproperties=None,  # properties for the legend title\n         alignment=\"center\",       # control the alignment within the legend box\n         *,\n-        ncol=1  # synonym for ncols (backward compatibility)\n+        ncol=1,  # synonym for ncols (backward compatibility)\n+        draggable=None  # whether the legend can be dragged with mouse\n     ):\n         \"\"\"\n         Parameters\n@@ -539,6 +545,10 @@ class Legend(Artist):\n         self.set_title(title, prop=title_prop_fp)\n         self._draggable = None\n \n+        # set draggable state if requested\n+        if draggable is not None:\n+            self.set_draggable(draggable)\n+\n         # set the text color\n \n         color_getters = {  # getter function depends on line or patch",
    "model_name_or_path": "sage-agent"
  },
  {
    "instance_id": "matplotlib__matplotlib-23964",
    "model_patch": "diff --git a/lib/matplotlib/backends/backend_ps.py b/lib/matplotlib/backends/backend_ps.py\nindex f209e811f1..bd996b7509 100644\n--- a/lib/matplotlib/backends/backend_ps.py\n+++ b/lib/matplotlib/backends/backend_ps.py\n@@ -666,7 +666,8 @@ grestore\n                     (item.x, item.ft_object.get_glyph_name(item.glyph_idx))\n                 )\n             # append the last entry\n-            stream.append(curr_stream)\n+            if curr_stream:\n+                stream.append(curr_stream)\n \n         self.set_color(*gc.get_rgb())",
    "model_name_or_path": "sage-agent"
  },
  {
    "instance_id": "matplotlib__matplotlib-23987",
    "model_patch": "",
    "model_name_or_path": "sage-agent"
  },
  {
    "instance_id": "matplotlib__matplotlib-24149",
    "model_patch": "",
    "model_name_or_path": "sage-agent"
  },
  {
    "instance_id": "matplotlib__matplotlib-24265",
    "model_patch": "",
    "model_name_or_path": "sage-agent"
  },
  {
    "instance_id": "matplotlib__matplotlib-24334",
    "model_patch": "",
    "model_name_or_path": "sage-agent"
  },
  {
    "instance_id": "matplotlib__matplotlib-24970",
    "model_patch": "",
    "model_name_or_path": "sage-agent"
  },
  {
    "instance_id": "matplotlib__matplotlib-25079",
    "model_patch": "",
    "model_name_or_path": "sage-agent"
  },
  {
    "instance_id": "matplotlib__matplotlib-25311",
    "model_patch": "",
    "model_name_or_path": "sage-agent"
  },
  {
    "instance_id": "matplotlib__matplotlib-25332",
    "model_patch": "",
    "model_name_or_path": "sage-agent"
  },
  {
    "instance_id": "matplotlib__matplotlib-25433",
    "model_patch": "",
    "model_name_or_path": "sage-agent"
  },
  {
    "instance_id": "matplotlib__matplotlib-25442",
    "model_patch": "",
    "model_name_or_path": "sage-agent"
  },
  {
    "instance_id": "matplotlib__matplotlib-25498",
    "model_patch": "",
    "model_name_or_path": "sage-agent"
  },
  {
    "instance_id": "matplotlib__matplotlib-26011",
    "model_patch": "",
    "model_name_or_path": "sage-agent"
  },
  {
    "instance_id": "matplotlib__matplotlib-26020",
    "model_patch": "",
    "model_name_or_path": "sage-agent"
  },
  {
    "instance_id": "mwaskom__seaborn-2848",
    "model_patch": "",
    "model_name_or_path": "sage-agent"
  },
  {
    "instance_id": "mwaskom__seaborn-3010",
    "model_patch": "",
    "model_name_or_path": "sage-agent"
  }
]