id: mf-003-create-package
name: Create Python Package Structure
description: |
  Convert the existing `utils.py` file into a proper Python package structure:

  ```
  mypackage/
  ├── __init__.py
  ├── string_utils.py
  ├── math_utils.py
  └── file_utils.py
  ```

  Split the functions appropriately and make sure they can be imported as:
  - `from mypackage import reverse_string, factorial, read_lines`
  - `from mypackage.string_utils import reverse_string`
category: multi_file
difficulty: hard
timeout_secs: 300
expected_max_turns: 18
languages:
  - python
tags:
  - package
  - module-structure
  - imports
setup_files:
  utils.py: |
    def reverse_string(s):
        """Reverse a string."""
        return s[::-1]

    def capitalize_words(s):
        """Capitalize each word in a string."""
        return ' '.join(word.capitalize() for word in s.split())

    def factorial(n):
        """Calculate factorial of n."""
        if n <= 1:
            return 1
        return n * factorial(n - 1)

    def is_even(n):
        """Check if n is even."""
        return n % 2 == 0

    def read_lines(filepath):
        """Read all lines from a file."""
        with open(filepath, 'r') as f:
            return f.readlines()

    def write_lines(filepath, lines):
        """Write lines to a file."""
        with open(filepath, 'w') as f:
            f.writelines(lines)
verifier:
  type: all
  verifiers:
    - type: files_exist
      paths:
        - mypackage/__init__.py
        - mypackage/string_utils.py
        - mypackage/math_utils.py
        - mypackage/file_utils.py
    - type: file_contains
      path: mypackage/string_utils.py
      contains: "def reverse_string"
    - type: file_contains
      path: mypackage/math_utils.py
      contains: "def factorial"
    - type: file_contains
      path: mypackage/file_utils.py
      contains: "def read_lines"
    - type: test_command
      command: |
        python3 -c "
        from mypackage import reverse_string, factorial, read_lines
        from mypackage.string_utils import capitalize_words
        from mypackage.math_utils import is_even

        assert reverse_string('hello') == 'olleh'
        assert factorial(5) == 120
        assert capitalize_words('hello world') == 'Hello World'
        assert is_even(4) == True

        print('Package structure created successfully!')
        "
