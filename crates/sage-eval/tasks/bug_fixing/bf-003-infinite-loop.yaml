id: bf-003-infinite-loop
name: Fix Infinite Loop
description: |
  The `find_target` function in `search.py` has an infinite loop bug when
  the target is not found in the list. Fix the bug so it returns -1 when
  the target is not found.
category: bug_fixing
difficulty: medium
timeout_secs: 150
expected_max_turns: 8
languages:
  - python
tags:
  - infinite-loop
  - binary-search
setup_files:
  search.py: |
    def find_target(sorted_list, target):
        """Binary search for target in sorted list. Returns index or -1."""
        left = 0
        right = len(sorted_list) - 1

        while left < right:
            mid = (left + right) // 2
            if sorted_list[mid] == target:
                return mid
            elif sorted_list[mid] < target:
                left = mid
            else:
                right = mid

        return -1
verifier:
  type: test_command
  command: |
    python3 -c "
    import signal

    def timeout_handler(signum, frame):
        raise TimeoutError('Function took too long - possible infinite loop')

    signal.signal(signal.SIGALRM, timeout_handler)

    from search import find_target

    # Test with timeout to catch infinite loops
    signal.alarm(2)

    # Found cases
    assert find_target([1, 2, 3, 4, 5], 3) == 2
    assert find_target([1, 2, 3, 4, 5], 1) == 0
    assert find_target([1, 2, 3, 4, 5], 5) == 4

    # Not found cases (these would infinite loop before fix)
    assert find_target([1, 2, 3, 4, 5], 6) == -1
    assert find_target([1, 2, 3, 4, 5], 0) == -1
    assert find_target([], 1) == -1

    signal.alarm(0)
    print('Infinite loop bug fixed!')
    "
